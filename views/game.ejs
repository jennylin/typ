<h1>Game <%= game.name %></h1>

<div id="transcript">
</div>

<script>
  $(document).ready(function() {
    if (window.EventSource !== undefined) {
      var source = new EventSource('/games/<%= game.id %>/moves');
      source.addEventListener('information', function(message) {
        var div = $('<div/>');
        div.addClass(message.type);
        div.html(message.data);
        $('#transcript').append(div);
      });
      source.addEventListener('question', function(message) {
        var div = $('<div/>');
        div.addClass(message.type);
        var body = JSON.parse(message.data);

        switch(body.type) {
          case "multiple":
            div.html('multiple!');
            break;
          default:
            div.html('something strange!');
            break;
        }
        $('#transcript').append(div);

      });
    } else {
      alert('fat chance homer')
    }
  })
</script>